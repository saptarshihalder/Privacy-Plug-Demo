onButton.addEventListener('click', () => triggerWebhook(onUrl, { status: 'on' }));
        offButton.addEventListener('click', () => triggerWebhook(offUrl, { status: 'off' }));

        // Simulate initial data flow
        function initializeDemo() {
            updatePlugStatus('off');
            addLogEntry('Privacy protection system initialized', 'info');
            addLogEntry('Data flow simulation started', 'info');
            startDataFlow();

            // Add hover effects for features
            const features = document.querySelectorAll('.privacy-feature');
            features.forEach(feature => {
                feature.addEventListener('mouseenter', () => {
                    if (!isProcessing) {
                        feature.style.transform = 'scale(1.05)';
                        feature.style.backgroundColor = '#f0f0f0';
                    }
                });
                feature.addEventListener('mouseleave', () => {
                    feature.style.transform = 'scale(1)';
                    feature.style.backgroundColor = 'white';
                });
            });

            // Add device interaction simulation
            const device = document.querySelector('.device');
            device.addEventListener('click', () => {
                if (!isProcessing) {
                    simulateDeviceInteraction();
                }
            });
        }

        // Simulate device interactions
        function simulateDeviceInteraction() {
            const currentStatus = plugIndicator.classList.contains('on');
            const interactionTypes = ['microphone', 'camera', 'location', 'network'];
            const type = interactionTypes[Math.floor(Math.random() * interactionTypes.length)];
            
            addLogEntry(`Device ${type} access attempt detected`, 'info');
            
            if (currentStatus) {
                addLogEntry(`${type.charAt(0).toUpperCase() + type.slice(1)} access blocked by privacy protection`, 'success');
                showBlockedAnimation(type);
            } else {
                addLogEntry(`${type.charAt(0).toUpperCase() + type.slice(1)} access granted (Protection OFF)`, 'error');
                showAccessAnimation(type);
            }
        }

        // Visual feedback animations
        function showBlockedAnimation(type) {
            const overlay = document.createElement('div');
            overlay.style.position = 'absolute';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
            overlay.style.backgroundColor = 'rgba(244, 67, 54, 0.2)';
            overlay.style.display = 'flex';
            overlay.style.justifyContent = 'center';
            overlay.style.alignItems = 'center';
            overlay.style.animation = 'fadeOut 1s forwards';
            overlay.style.zIndex = '1000';

            const icon = document.createElement('div');
            icon.textContent = type === 'microphone' ? 'ðŸŽ¤' : 
                             type === 'camera' ? 'ðŸ“·' : 
                             type === 'location' ? 'ðŸ“' : 'ðŸŒ';
            icon.style.fontSize = '2em';
            icon.style.animation = 'blocked 0.5s forwards';

            overlay.appendChild(icon);
            document.querySelector('.device-screen').appendChild(overlay);

            setTimeout(() => {
                overlay.remove();
            }, 1000);
        }

        function showAccessAnimation(type) {
            const duration = 2000;
            const particleCount = 10;
            
            for (let i = 0; i < particleCount; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'data-particle';
                    particle.style.backgroundColor = '#4CAF50';
                    particle.style.left = `${Math.random() * 100}%`;
                    connectionLines.appendChild(particle);

                    setTimeout(() => {
                        particle.remove();
                    }, duration);
                }, i * (duration / particleCount));
            }
        }

        // Add keypress shortcuts
        document.addEventListener('keydown', (e) => {
            if (!isProcessing) {
                if (e.key === 'O' || e.key === 'o') {
                    onButton.click();
                } else if (e.key === 'F' || e.key === 'f') {
                    offButton.click();
                }
            }
        });

        // Custom styles for animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
            @keyframes blocked {
                0% { transform: scale(1); }
                50% { transform: scale(1.5); }
                100% { transform: scale(1); }
            }
        `;
        document.head.appendChild(style);

        // Initialize the demo
        initializeDemo();
    </script>
</body>
</html>
